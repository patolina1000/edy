<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Pr√©-venda | Acesso ao Telegram</title>

  <link rel="canonical" href="https://hadriellemaria.online/presell/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Pr√©-venda | Acesso ao Telegram">
  <meta property="og:description" content="Continue para acessar o bot no Telegram.">
  <meta property="og:url" content="https://hadriellemaria.online/presell/">
  <meta name="twitter:card" content="summary_large_image">

  <link rel="dns-prefetch" href="https://connect.facebook.net">
  <link rel="preconnect" href="https://connect.facebook.net" crossorigin>
  <link rel="dns-prefetch" href="https://ipapi.co">
  <link rel="preconnect" href="https://ipapi.co">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg1: #0a0f2c;
      --bg2: #1a1440;
      --brand1: #ff007f;
      --brand2: #7928ca;
      --text: #ffffff;
      --muted: #aaa4d6;
      --progress-bg: rgba(255, 255, 255, 0.1);
      --progress-fill: linear-gradient(90deg, var(--brand1), var(--brand2));
      --shadow-color: rgba(255, 0, 128, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top, var(--bg1), var(--bg2));
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      text-align: center;
      padding: 16px;
      overflow: hidden;
    }

    .container {
      max-width: 500px;
      width: 100%;
    }

    .card {
      padding: 36px 28px;
      border-radius: 20px;
      background: rgba(20, 20, 40, 0.55);
      backdrop-filter: blur(12px);
      box-shadow: 0 0 40px var(--shadow-color), 0 0 80px var(--shadow-color);
      position: relative;
      z-index: 1;
    }

    /* Efeito glow animado */
    .card::before {
      content: '';
      position: absolute;
      inset: -2px;
      border-radius: 22px;
      padding: 2px;
      background: linear-gradient(135deg, var(--brand1), var(--brand2), #00c6ff);
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude;
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      animation: glow 6s linear infinite;
      z-index: -1;
    }

    @keyframes glow {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 22px;
    }

    .avatar-photo {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid #fff;
      object-fit: cover;
      box-shadow: 0 0 20px rgba(255, 0, 127, 0.5), 0 0 30px rgba(121, 40, 202, 0.4);
      transition: transform 0.3s ease;
    }

    .avatar-photo:hover {
      transform: scale(1.05);
    }

    .telegram-logo {
      width: 70px;
      height: 70px;
      filter: drop-shadow(0 0 8px rgba(0, 198, 255, 0.6));
    }

    h1 {
      font-size: clamp(22px, 5vw, 28px);
      font-weight: 800;
      line-height: 1.3;
      margin-bottom: 10px;
      text-shadow: 0 0 14px rgba(255, 0, 127, 0.6), 0 0 24px rgba(0, 198, 255, 0.4);
    }

    h1 span {
      background: linear-gradient(90deg, var(--brand1), var(--brand2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 15px;
      color: var(--muted);
      margin-bottom: 18px;
    }

    .badge-neon {
      display: inline-block;
      background: rgba(255, 0, 127, 0.08);
      border: 1px solid rgba(255, 0, 127, 0.25);
      border-radius: 12px;
      padding: 8px 16px;
      font-size: 14px;
      margin-bottom: 12px;
      color: #ff80b5;
      text-shadow: 0 0 8px rgba(255, 0, 127, 0.3);
      font-weight: 600;
    }

    .geo {
      font-size: 14px;
      color: var(--muted);
      margin-bottom: 18px;
    }

    #geo-city {
      color: var(--brand1);
      font-weight: 600;
    }

    .buttons {
      margin: 24px 0;
    }

    .btn {
      display: inline-block;
      width: 100%;
      padding: 16px 32px;
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      background: var(--progress-fill);
      border: none;
      border-radius: 12px;
      text-decoration: none;
      cursor: pointer;
      box-shadow: 0 0 20px rgba(255, 0, 127, 0.6), 0 0 30px rgba(120, 40, 202, 0.6);
      transition: all 0.3s ease;
      position: relative;
      z-index: 10;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 0 30px rgba(255, 0, 127, 0.8), 0 0 40px rgba(120, 40, 202, 0.8);
    }

    .note {
      margin-top: 20px;
      font-size: 13px;
      color: var(--muted);
      opacity: 0.7;
    }

    @media (max-width: 480px) {
      body {
        padding: 12px;
      }

      .card {
        padding: 28px 20px;
      }

      .header {
        gap: 15px;
      }

      .avatar-photo {
        width: 70px;
        height: 70px;
      }

      .telegram-logo {
        width: 60px;
        height: 60px;
      }
    }
  </style>
  <link rel="preload" as="image" href="/images/perfil.jpg">
</head>
<body>
  <main class="container">
    <div class="card">
      <div class="header">
        <svg class="telegram-logo" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
          <defs>
            <linearGradient id="telegram-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#2AABEE;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#229ED9;stop-opacity:1" />
            </linearGradient>
          </defs>
          <circle cx="120" cy="120" r="120" fill="url(#telegram-gradient)"/>
          <path fill="#fff" d="M81.229 128.772l14.237 39.406s1.78 3.687 3.686 3.687 30.255-29.492 30.255-29.492l31.525-60.89L81.737 118.6z"/>
          <path fill="#d2e5f1" d="M100.106 138.878l-2.733 29.046s-1.144 8.9 7.754 0 17.415-15.763 17.415-15.763"/>
          <path fill="#b5cfe4" d="M81.486 130.178l-17.8-5.467s-2.006-.797-1.357-2.615c.136-.385.405-.732.82-1.091 3.957-3.365 74.654-28.256 74.654-28.256s2.732-1.022 4.339-.98c.707.019 1.243.273 1.555.88.155.303.235.67.235 1.09l-.017.308s-.085.765-.256 1.988c-.172 1.223-11.802 53.52-11.802 53.52s-.68 2.786-3.158 2.871c-1.306.045-2.984-.518-5.38-1.8-4.53-2.423-19.833-13.713-23.31-16.076-.903-.614-1.777-1.753-.133-3.227 3.688-3.305 8.16-7.646 10.85-10.457.838-.87 1.683-2.867-.918-1.635-10.522 4.957-25.294 16.77-27.72 18.524-.435.315-1.02.527-1.745.523z"/>
        </svg>
        <img class="avatar-photo" src="/images/perfil.jpg" alt="Hadrielle Maria" width="80" height="80" loading="eager" fetchpriority="high">
      </div>
      
      <h1>Estamos preparando seu <span>acesso VIP‚Ä¶</span></h1>
      <span class="badge-neon">üî•92% das vagas j√° foram preenchidas</span>
      <p class="subtitle">Aguarde alguns segundos enquanto configuramos<br>seu acesso exclusivo.</p>
      <p class="geo">Pertinho de voc√™, estou em <span id="geo-city">sua cidade</span>!</p>

      <div class="buttons">
        <a id="cta-telegram" class="btn" href="#" rel="nofollow" onclick="handleTelegramClick(event); return false;">Entrar no Telegram</a>
      </div>
      <p class="note"><small>Ao continuar, voc√™ concorda com nossos termos.</small></p>
    </div>
  </main>

  <!-- Meta Pixel Code -->
  <script>
    // Verifica se j√° existe um pixel carregado
    if (window.fbq && window.fbq.loaded) {
      console.log('Facebook Pixel j√° carregado, pulando inicializa√ß√£o...');
    } else {
      // Inicializa o Pixel sem disparo autom√°tico
      !function (f, b, e, v, n, t, s) {
        if (f.fbq) return; n = f.fbq = function () {
          n.callMethod ?
            n.callMethod.apply(n, arguments) : n.queue.push(arguments)
        };
        if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
        n.queue = []; t = b.createElement(e); t.async = !0;
        t.src = v; s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s)
      }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
    }

    // Fun√ß√£o ass√≠ncrona para inicializar e disparar o Pixel
    (async function initPixel() {
      // Verifica se j√° foi inicializado para evitar duplica√ß√£o
      if (window.pixelInitialized) {
        console.log('Pixel j√° foi inicializado, pulando...');
        return;
      }
      window.pixelInitialized = true;

      try {
        // Busca dados de geolocaliza√ß√£o usando IP-API PRO
        console.log('üìç Detectando localiza√ß√£o com IP-API PRO...');
        const response = await fetch('https://pro.ip-api.com/json/?key=R1a8D9VJfrqTqpY&fields=status,country,countryCode,region,city,zip', {
          method: 'GET',
          headers: { 'Accept': 'application/json' }
        });
        
        const data = await response.json();

        // Monta Advanced Matching corretamente
        const advancedMatching = {};
        if (data.status === 'success') {
          if (data.city) advancedMatching.ct = data.city;
          if (data.region) advancedMatching.st = data.region;
          if (data.zip) advancedMatching.zp = data.zip;
          if (data.countryCode) advancedMatching.country = data.countryCode;
        }

        // Inicializa o Pixel com Advanced Matching
        fbq('init', '1280205146659070', advancedMatching);

        // Dispara o evento PageView (sem par√¢metros customizados)
        fbq('track', 'PageView');

        console.log('‚úÖ Facebook Pixel inicializado com sucesso', advancedMatching);
      } catch (error) {
        console.warn('‚ö† Falha ao capturar geolocaliza√ß√£o, inicializando Pixel b√°sico:', error);
        fbq('init', '1280205146659070');
        fbq('track', 'PageView');
      }
    })();
  </script>

  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=1280205146659070&ev=PageView&noscript=1" />
  </noscript>

  <script>
    // Vari√°vel global para armazenar dados de geolocaliza√ß√£o
    let geoData = null;
    const TELEGRAM_URL = 'https://t.me/Ayllars_bot?start=Ch';

    // ====== GEOLOCALIZA√á√ÉO - Usando IP-API PRO (mesmo sistema do /links) ======
    async function detectUserLocation() {
      const cityElement = document.getElementById('geo-city');
      
      try {
        console.log('üìç Detectando localiza√ß√£o com IP-API PRO...');
        const response = await fetch('https://pro.ip-api.com/json/?key=R1a8D9VJfrqTqpY&fields=status,country,countryCode,region,city,timezone,isp,query', {
          method: 'GET',
          headers: { 'Accept': 'application/json' }
        });
        
        if (response.ok) {
          const data = await response.json();
          
          if (data.status === 'success' && data.city) {
            geoData = {
              ip: data.query,
              city: data.city,
              region: data.region,
              country: data.countryCode || 'BR',
              timezone: data.timezone,
              org: data.isp
            };
            
            if (cityElement) {
              cityElement.textContent = data.city;
            }
            console.log(`‚úÖ Localiza√ß√£o detectada: ${data.city}`);
            return;
          }
        }
      } catch (error) {
        console.warn('‚ùå Erro na API de geolocaliza√ß√£o:', error);
      }

      // Fallback padr√£o
      console.log('üè† Usando localiza√ß√£o padr√£o');
      if (cityElement) {
        cityElement.textContent = 'sua cidade';
      }
      geoData = { city: 'S√£o Paulo', country: 'BR' };
    }

    // Executar detec√ß√£o ao carregar
    document.addEventListener('DOMContentLoaded', function() {
      detectUserLocation();
    });

    // ====== FUN√á√ÉO AUXILIAR PARA OBTER COOKIES ======
    function getCookie(name) {
      const value = "; " + document.cookie;
      const parts = value.split("; " + name + "=");
      if (parts.length === 2) return parts.pop().split(";").shift();
    }

    // ====== FUN√á√ÉO GLOBAL PARA CLIQUE NO BOT√ÉO ======
    function handleTelegramClick(ev) {
      console.log('üñ±Ô∏è ONCLICK - Bot√£o clicado!');
      if (ev) {
        ev.preventDefault();
        ev.stopPropagation();
      }

      // Tenta enviar ViewContent se o fbq estiver dispon√≠vel
      if (typeof fbq !== 'undefined') {
        try {
          const urlParams = new URLSearchParams(window.location.search);
          const fbclid = urlParams.get('fbclid');
          const fbp = getCookie('_fbp');
          const fbc = fbclid ? 'fb.1.' + Date.now() + '.' + fbclid : getCookie('_fbc');

          const eventData = {
            fbp: fbp,
            fbc: fbc,
            fbclid: fbclid,
            external_id: urlParams.get('session_id'),
            utm_source: urlParams.get('utm_source'),
            utm_campaign: urlParams.get('utm_campaign'),
            utm_medium: urlParams.get('utm_medium'),
            utm_content: urlParams.get('utm_content'),
            utm_term: urlParams.get('utm_term'),
            content_name: 'Telegram Access',
            content_category: 'Presell Page'
          };

          // Adiciona dados de geolocaliza√ß√£o se dispon√≠veis
          if (geoData) {
            eventData.visitor_ip = geoData.ip;
            eventData.city = geoData.city;
            eventData.region = geoData.region;
            eventData.country = geoData.country;
            eventData.timezone = geoData.timezone;
            eventData.isp = geoData.org;
          }

          fbq('track', 'ViewContent', eventData);
          console.log('‚úÖ ViewContent enviado:', eventData);
        } catch (error) {
          console.warn('‚ö† Erro ao enviar ViewContent:', error);
        }
      } else {
        console.warn('‚ö† Facebook Pixel n√£o dispon√≠vel');
      }

      // Redireciona ap√≥s um pequeno delay
      console.log('üöÄ Redirecionando para:', TELEGRAM_URL);
      setTimeout(function() {
        window.location.href = TELEGRAM_URL;
      }, 300);

      return false;
    }

    // ====== ADICIONA EVENT LISTENER TAMB√âM (dupla seguran√ßa) ======
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üöÄ DOM carregado, inicializando scripts...');

      const cta = document.getElementById('cta-telegram');
      console.log('üîç Bot√£o:', cta);

      if (!cta) {
        console.error('‚ùå Bot√£o n√£o encontrado!');
        return;
      }

      console.log('‚úÖ Bot√£o encontrado!');

      cta.addEventListener('click', handleTelegramClick);

      console.log('‚úÖ Event listener adicionado ao bot√£o');
    });
  </script>
</body>
</html>

